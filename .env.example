# Local Server-Side Google Tag Manager Environment Configuration
# ==============================================================
#
# This file contains environment variables for the GTM Server-Side setup.
#
# SETUP INSTRUCTIONS:
# -------------------
# 1. Copy this file to .env in the same directory:
#    cp .env.example .env
#
# 2. Get your CONTAINER_CONFIG value:
#    - Log in to Google Tag Manager (https://tagmanager.google.com)
#    - Select your Server-Side container
#    - Go to Admin > Container Settings
#    - Look for "Container Config" section
#    - Copy the entire configuration string
#
# 3. (Optional) Custom Domain Setup:
#    - Set CUSTOM_DOMAIN below (e.g., sgtm.example.com)
#    - Add mapping to /etc/hosts: 127.0.0.1 sgtm.example.com
#    - If ports are changing, regenerate certificates:
#      rm -rf ssl/ && docker-compose up -d
#
# 4. (Optional) Port Mapping in local machine:
#    - Set PORT_TAGGING_SERVER and PORT_PREVIEW_SERVER below (e.g., 8888 and 8889)
#
# 5. (Optional) Set memory and cpu limits
#    - Set GTM_MEMORY_LIMIT and GTM_CPU_LIMIT below (e.g., 512m and 1)
#
# 6. Run the complete stack:
#    docker-compose up -d
#
# 7. Access the servers:
#    - Live:    https://localhost:8888 (or https://CUSTOM_DOMAIN or https://CUSTOM_DOMAIN:8888)
#    - Preview: https://localhost:8889 (or https://CUSTOM_DOMAIN:8889)
#
# SECURITY NOTE:
# --------------
# The .env file is gitignored and should NEVER be committed to version control
# as it contains sensitive configuration data.

# ===== REQUIRED CONFIGURATION =====

# Your GTM Server-Side container configuration string from GTM Admin
# Example: aWQ9AAANLVdSOUo0NTROJmVudj0xJmF1dGg9bnRMejlYRHhVU1RBd1VaOHdSb3N2dw==
CONTAINER_CONFIG=

# ===== OPTIONAL CONFIGURATION =====

# Interval between container refreshes to fetch the latest version of the container.
CONTAINER_REFRESH_SECONDS=25

# Leave empty to use localhost only
CUSTOM_DOMAIN=

# Port for the Live Server
PORT_TAGGING_SERVER=8888

# Port for the Preview Server
PORT_PREVIEW_SERVER=8889

# CPU limit for the containers (e.g., 0.5 for 50% of a core, 1.5 for 1.5 cores)
# Leave empty for no limit. Deployments using GCP CloudRun use 1 CPU.
# Google recommends using at most 1 CPU.
CPU_LIMIT_SERVER=1

# Memory limit for the containers (e.g., 512m, 1g)
# Leave empty for no limit. Deployments using GCP CloudRun use 512m.
MEMORY_LIMIT_SERVER=512m